# API (Application Programming Interface)
API는 응용 프로그램에서 사용할 수 있도록, 운영 체제나 프로그래밍 언어가 제공하는 기능을 제어할 수 있게 만든 인터페이스를 뜻한다. 주로 파일 제어, 창 제어, 화상 처리, 문자 제어 등을 위한 인터페이스를 제공한다.

API는 응용 프로그램 이진 인터페이스(ABI)와는 구별한다. API는 소스 코드 기반인 반면 ABI는 이진 인터페이스이다. 이를테면 POSIX는 API인 반면, 리눅스 기본 규격은 ABI를 제공한다.

## 좀 더 자세하게

프로그래밍에서, 프로그램을 작성하기 위한 일련의 부 프로그램, 프로토콜 등을 정의하여 상호 작용을 하귀 위한 인터페이스 사양이다. API는 소프트웨어 컴포넌트(Function, Method, Operation...)의 기능, 입력, 출력, 그리고 이에 사용되는 자료형으로 표현된다. API 자체는 어디까지나 "사양"만을 정의하기 때문에 구현물과 독립적이다. 잘 설계된 API는 프로그램 개발을 보다 쉽게 해 준다. API는 다양한 형태로 존재하며, 유닉스의 POSIX 표준, 윈도우의 MFC나 Win32, C++의 STL, Java API등이 해당ㄷ한다.

그래픽 카드나 디스크 드라이브 등의 하드웨어 또는 데이터베이스를 조작할 때, API는 작업을 편리하게 해준다. 대개 실제로는 밑바닥에서 매우 저수준으로 이러한 작업이 수행된다. API는 이러한 작업들에 대한 기능을 대상이 되는 언어에 맞게 추상화하고 프로그래머가 사용하기 편리하게 설계된 인터페이스 사양이다.

프로그램에 플러그인 형태로 설계된 API가 적용되면, 이미 작성되어 컴파일되고 완성된 프로그램의 수정 없이 프로그램의 기능을 추가하는 것이 가능하다. 웹 브라우저 프로그램의 플러그인, 애드온과 같은 것이 바로 이러한 형식의 플러그인 API를 사용해 구현된 것이다.

API가 실제 기능 구현체인 라이브러리와 함께 제공되는 경우도 있으며, 이 경우를 보통 SDK(Software Development Kit)라고 한다. SDK는 보통 API, 라이브러리와 함께 프로그램을 개발하는데 필요한 여러 보조 프로그램이 같이 배포된다.

원격의 컴퓨터에 기능을 수행할 수 있도록 해주는 SOAP 또는 RESTful 서비스에서는 API는 그 자체로 원격 기능에 대한 사양이 된다.

예를 들어 명령어 창(MS-DOS 셸, 윈도우의 cmd.exe, 또는 유닉스/리눅스의 *Term 터미널 프로그램, OS X의 Terminal)에 "Hello, World!" 라는 문자열을 출력하는 프로그램을 C언어로 작성한다고 하자. 당연히 텍스트로 출력하는 printf API를 사용하여 printf("Hello, World!\n"); 라고 작성하게 될 것이며, 이는 윈도우, 리눅스, 유닉스, OS X 모두에서 동일하게 동작하도록 C언어 API가 보장해준다. 프로그래머는 보다 저수준에서 어떠한 일이 일어나는지 알지 못해도, 이미 정의된 printf를 사용하기만 하면 편리하게 텍스트를 출력할 수 있다. 즉 잘 설계된 인터페이스를 사용하면 환경(플랫폼)이 달라져도 동일한 코드가 동일한 결과를 수행하며, 보다 편리하게 프로그래밍을 할 수 있다.

한마디로, API는 소스 코드 수준에서 정의되는 인터페이스다.

라이브러리는 실제로 동작할 수 있는 단편화된 프로그램이라는 점에서 API와 다르다. 라이브러리 자체는 API 가 없이 존재할 수 있고, 이미 구현되어 기계어로 컴파일된 프로그램에 의해 사용될 수 있다. 이미 구현된 라이브러리와 프로그램 사이의 인터페이스 사양 또한 ABI이다. API 없이 프로그램을 실행하는데 필요한 라이브러리만 배포되는 대표적인 경우로 "Visual C++ Runtime Library", "DirectX Runtime"이 있다.

# 웹에서의 API
웹 API는 웹 애플리케이션 개발에서 다른 서비스에 요청 보내고 응답을 받기 위해 정의된 명세를 일컫는다. 예를 들어 블로그 API를 이용하면 블로그에 접속하지 않고도 다른 방법으로 글을 올릴 수 있다. 그 외에 우체국의 우편번호 API, 구글과 네이버의 지도 API등 유용한 API들이 많으므로, 요즘은 구축이나 추가개편 시 따로 추가로 개발하지 않고 이런 오픈 API를 가져와 사용하는 추세다.

## REST (REpresentational State Transfer)
- 하이퍼미디어 기반의 소프트웨어 아키텍쳐 형식(사상)
- HTTP 프로토콜 상에서 URI 주소와 CRUD 조작을 통해 서비스를 제공받는 아키텍쳐 개념
- XML이나 HTTP같은 간단한 웹 인터페이스로 통신
- 웹에 존재하는 모든 자원에 고유한 URI를 부여해 활용하는 것, 자원을 정의하고 자원에 대한 주소를 지정하는 방법론

### REST의 개념이 대두된 이유
- 하나의 Backend로 다양한 Device에 대응하기 위해
- 애플리케이션의 복잡도가 증가함에 분리 및 통합 방법중 하나

### REST 구성
- 자원 (Resource) - URI
- 행위 (Verb) - HTTP Method
- 표현 (Representaion)

예)

    /users GET
    /users/{id} GET
    /users PUT

### REST의 특징
1) Uniform (유니폼 인터페이스) - HTTP 표준에만 따른다면, 디바이스, 언어, 기술에 종속되지 않고 모든 플랫폼에서 사용이 가능하며, URI로 지정한 리소스에 대한 조작이 가능한 아키텍처 스타일을 의미한다.
<br />
2) Stateless (무상태성) - HTTP는 Stateless Protocol 이므로, REST 역시 무 상태성을 갖는다. 즉, HttpSesttion과 같은 컨텍스트 저장소에 상태정보를 따로 저장하고 관리하지 않고, API 서버는 들어오는 요청만을 단순 처리하면 된다. 세션과 같은 컨텍스트 정보를 신경쓸 필요가 없어 구현이 단순해진다.
<br />
3) Cacheable (캐시가능) - HTTP 기존의 웹 표준을 그대로 사용하므로, 웹에서 사용하는 기존의 인프라를 그대로 활용 가능하다. HTTP 프로토콜 기반의 로드밸런서나, SSL은 물론이고 HTTP가진 가장 강력한 특징 중의 하나인 캐싱 기능을 적용할 수 있다. 일반적인 서비스에서 조회 기능이 주로 사용됨을 감안하면, HTTP 리소스들을 웹 캐쉬 서버 등에 캐싱하는 것은 용량이나 성능 면에서 이점이 있다. 캐싱 구현은 HTTP 프로토콜 표준에서 사용하는 Last-Modified 태그나 E-Tag를 이용하면 가능하다.
<br />

***캐시***

캐시란 무엇인가?
- 웹 캐시는 자주 쓰이는 문서의 사본을 자동으로 보관하는 HTTP 장치이다. 웹 요청이 캐시에 도착했을 때, 캐시된 로컬 사본이 존재한다면, 그 문서는 원 서버가 아니라 그 캐시로부터 제공된다.
<br />
캐시를 사용할 때의 이점은 무엇인가?
- 캐시는 불필요한 데이터 전송을 줄여서, 네트워크 요금으로 인한 비용을 줄여 준다.
- 캐시는 네트워크 병목을 줄여준다. 대역폭을 늘리지 않고도 페이지를 빨리 불러올 수 있게 된다.
- 캐시는 원 서버에 대한 요청을 줄여준다. 서버는 부하를 줄일 수 있으며 더 빨리 응답할 수 있게 된다.
- 페이지를 먼 곳에서 불러올수록 시간이 많이 걸리는데, 캐시는 거리로 인한 지연을 줄여준다.

E-Tag : 메시지에 담겨있는 엔터티를 위한 엔터티 태그를 제공한다. 이를 활용하여 리소스를 식별할 수 있다.
Last-Modified : 엔터티가 마지막으로 변경된 시각에 대한 정보를 제공한다. (파일인 경우 파일 시스템이 제공해 준 최근 변경 시각, 동적으로 생성된 리소스라면 응답이 만들어진 시간)
<br />

4) Self-descriptiveness (자체 표현 구조) : 동사(Method) + 명사(URI) 로 이루어져있어 어떤 메서드에 무슨 행위를 하는지 알 수 있으며, 메시지 포맷 역시 JSON을 이용해서 직관적으로 이해가 가능한 구조로, REST API 메시지만 보고도 이를 쉽게 이해할 수 있다.
<br />

5) Client - Server 구조 : REST 서버는 API 제공, 클라이언트는 사용자 인증이나 컨텍스트(세션, 로그인 정보 등)을 직접 관리하는 구조로 각각의 역할이 확실히 구분되기 때문에 클라이언트와 서버에서 개발해야 할 내용이 명확해지고 서로간 의존성이 줄어들게 된다.
<br />

6) 계층형 구조 : API 서버는 순수 비지니스 로직을 수행하고, 그 앞단에 사용자 인증, 암호화(ssl), 로드밸런싱 등을 하는 계층을 추가하여 구조상의 유연상을 둘 수 있다. 이는 간단하게는 HA Proxy나 Apache의 Reverse Proxy를 통해, 더 나아가서는 API gateway 등을 활용하여 Micro Service Architecture로도 구현이 가능하게 한다.

### RESTful
- REST 사상을 따르는 일. 그러한 서비스

### REST API
- RESTful하게 제공되는 웹 API
- 웹 인터페이스 상에서 어떤 리소스를 조작하는 인터페이스

(좌측 콜렉션, 우측 원소)
GET -> 목록조회, 조회
PUT -> 교체, 교체
PATCH -> (잘 사용안함), 갱신
POST -> 생성, (잘 사용안함)
DELETE -> 삭제, 삭제


### REST 관련 HTTP 상태 코드

https://zetawiki.com/wiki/REST_%EA%B4%80%EB%A0%A8_HTTP_%EC%83%81%ED%83%9C_%EC%BD%94%EB%93%9C


## Clean URL, RESTful URL, user-friendly URL, SEO-friendly URL

- 질의어 없이, 경로만 가진 간단한 구조의 URL
- 기억하기 쉽고, 입력하기 쉬움

`http://example.com/index.php?page=foo ->	http://example.com/foo`

    http://example.com/index.php?page=consulting/marketing -> http://example.com/consulting/marketing`

## URI, URL, URN

URI (Uniform Resource Identifier)
- URI는 인터넷의 우편물 주소 같은 것으로, 정보 리소스를 고유하게 식별하고 위치를 지정할 수 있다.
- URI에는 두가지 형태가 있는데 이것이 URL, URN 이라는 것이다.

URL (Uniform Resource Locator)
- URL은 특정 서버의 한 리소스에 대해 구체적인 위치를 서술한다.
- URL은 리소스가 정확히 어디에 있고 어떻게 접근할 수 있는지 분명히 알려준다.

URN (Uniform Resource Name)
- URN은 콘텐츠를 이루는 한 리소스에 대해, 그 리소스의 위치에 영향 받지 않는 유일무이한 이름 역할을 한다.
- URN은 아직 채택되지 않았다.

URL과 URN은 URI의 종류이다.

그렇기에 모든 URL은 URI이고, 또한 모든 URN은 URI이다.

그리고 위에서 언급했듯이, URL과 URN은 다르다.

그렇다는 건 모든 URI는 URL이라고 말할 수 없다. 
