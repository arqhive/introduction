# SSH (Secure Shall)

원격지 호스트 컴퓨터에 접속하기 위해 사용되는 인터넷 프로토콜. 기존의 유닉스 시스템 셸에 원격 접속하기 위해 사용하던 텔넷은 암호화가 이루어지지 않아 계정 정보가 탈취될 위험이 높으므로, 여기에 암호화 기능을 추가하여 1995년에 나온 프로토콜이다. 기본 포트는 22번. 셸로 원격 접속을 하는 것이므로 기본적으로 CLI 상에서 작업 하게 된다.

SSH는 암호화 기법을 사용하기 때문에, 통신이 노출된다고 하더라도 이해할 수 없는 암호화된 문자로 보인다.

## SSH의 동작 과정 (키로 로그인 할 시)

1. 클라이언트가 서버에 접속 승인요청과 함께 공개키를 요구한다.
2. 서버에서는 요구한 공개키를 찾고 검색 결과를 SSH에 응답, 개인키를 요구한다.
3. 클라이언트는 SSH-Agent에 캐인키 탐색을 요청한다. (만약 개인키 활성화를 위해 암호가 필요하다면 사용자에게 요구한다.)
4. 만약 개인키를 찾았다면 개인키를 찾았다고 응답한다.
5. 서버가 SSH의 접속을 승인한다.

## SSH 프로토콜 사용 조건

1. 22번 TCP포트가 방화벽에서 열려있어야 한다.
2. SSH 서버 프로그램이 설치 및 구동되고 있어야 한다.
3. SSH 프로토콜로 접속할 수 있는 SSH 클라이언트가 필요하다.

## SSH Server 만들기
리눅스 최신 배포판은 대부분 SSH 서버를 기본적으로 탑재 했을 가능성이 높다. (openssh-server)

없다면 다음과 같은 명령어로 패키지를 설치한다.(root 권한 필요)

`$ apt install openssh-server`

TCP 22번 포트를 허용한다.(root 권한 필요)

`$ ufw allow 22/tcp`

SSH 서버는 /etc/ssh/sshd_config 라는 설정 파일을 참조한다. 접속 및 보안에 관한 설정을 할 수 있다.

### SSH Client 이용하기

리눅스에서는 OpenSSH를 이용하여 터미널을 이용해 접속 할 수 있다.
`ssh [UserName]@[HostName] -option`

혹은 putty와 같은 클라이언트 프로그램으로도 가능하다.
